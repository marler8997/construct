

defmode calculator source result
{
  if result == null {
    throw "in calculator mode, every statement must evaluate to a number";
  }
  if result is number {
    message source;
    message "    = " result;
  } else {
    throw "in calculator mode, every statement must evalulate to a number, but got " result;
  }
}
changeMode calculator
1
2+3
"Hello, World!".length
